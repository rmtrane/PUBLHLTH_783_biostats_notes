# (PART) Data Types and Descriptive Statistics {-}

# Why Descriptive Statistics?

*Descriptive Statistics*, as the name implies, are about describing something. In general, we can only describe what we have at hand, so descriptive statistics only deal with the population in the very, very, very rare case when we have measured the entire population. It is way more common that descriptive statistics are about the sample at hand. 

Often when conducting an experiment, what we are actually interested in is using the sample we obtain to say something about the general population. If we, for example, enroll 200 patients in a study to find out if a new drug works, we're not *really* interested in whether or not it works for those 200 patients specifically, but more so if it works for any individual from the population in general. With that in mind, the whole concept of descriptive statistics might not seem very (1) exciting, (2) useful, or (3) necessary. While (1) is highly subjective, (2) very much so depends on the specific situation, there is little question that it is in fact necessary. 

Recall our general setup for any statistical analysis: we have some question about some feature of a population. To answer this question, we go get a sample of the popoulation. If this is a good sample, the characteristics of this sample mimic those of the general population. If this is the case, then the hope is that we can draw conclusions about the sample, and generalize them to the general population. Conversely, if that is *not* the case, then no matter how convincing the evidence we find in the sample is for or against our hypotheses, it tells us nothing about the general popoulation. 

```{r, general-population, echo = FALSE, engine = 'tikz', caption = "Recall the general setup: a sample is drawn from the population of interest."}
\begin{tikzpicture}
  \node[align=center] at (0,11) {\huge \bf Population};
  \draw [thick] (0,0) to [out=0, in=-90] (4.5,4)
                      to [out=90,in=-90] (3.5,8)
                      to [out=90,in=0] (2,10)
                      to [out=180,in=0] (0,9)
                      to [out=180,in=0] (-3,10)
                      to [out=180,in=90] (-5,7)
                      to [out=-90,in=90] (-4,5)
                      to [out=-90,in=90] (-5,2)
                      to [out=-90,in=180](0,0);

  \node[align=center] at (6.25,9) {\large SRS};
  \draw [thick,->] (4,8) to [out=25,in=155] (8.5,8);

  \node[align=center] at (10,11) {\huge \bf Sample};
  \draw [thick] (10,8.5) to [out=0,in=135] (11,8)
                         to [out=-45,in=100] (12,7)
                         to [out=-75,in=90] (12.5,5)
                         to [out=-105,in=0] (11.25,4)
                         to [out=180,in=0] (9.5,4.25)
                         to [out=180,in=0] (8.5,4)
                         to [out=180,in=-90] (8,4.5)
                         to [out=90,in=-90] (8.25,5.25)
                         to [out=90,in=-165] (8.5,7.5)
                         to [out=0,in=180](10,8.5);

\end{tikzpicture}
```

So how do we make sure the sample is representative of the population? The first step is to make sure our sampling scheme is good. Ideally, we sample completely at random, meaning that every single individual in the population has the same chance of ending up in the sample. As you might be able to guess, this is rarely the case, but if the sampling is done right it is either approximately true, or the sampling is done in a way that any biases introduced can be accounted for in the analysis.^[**Full disclaimer**: sampling is hard. As in really, really, really hard. Very smart people spend a lot of time on making sure different sampling schemes work. It is well beyond the scope of this course, and me, how the details of this work out.] Most commonly, sampling is done in such a way that the "equal chance" assumption isn't too crazy. But how do we know if this is actually the case? 

The truth is, we don't really. What we can do, though, is describe the sample we obtain. That way we can make sure we don't generalize any results to an inappropriate population. Historically, this mistake has been made over and over again in medical research when excluding women and ethnic minorities from studies.^[See [@liu_womens_2016] for a more thorough discussion of the exclusion of women in particular.] For this particular reason, producing descriptive statistics is often the first step in any data analysis.

The rest of this section will go through different types of data, and show how we in each case can describe (or summarize, if you will) the specific type of data. 

In general, when we talk about data we often refer to *variables*. Variables are simply (and very vaguely) *things we measure*. You will see examples which hopefully helps understand exactly what is meant by a variable. 

# Discrete Data {#discrete}

A variable is called a *discrete* variable if the possible values of the variable are countable, that is if you can count them. Note that a discrete variable can technically have an infinite number of possible outcomes. 

A discrete variable is of one of two subtypes: *categorical* or *ordinal*.
 
## Categorical data {#categorical}

Categorical variables are discrete variables with no particular ordering of the categories.

### Examples -- categorical data

The classical example of a categorical variable is sex. For each subject, the value of this variable is one of two possible values: male or female. 

Other examples:

* color
* race
* blood type
* country of origin
* political orientation

### Binary/Dichotomous Data

Often researchers will refer to certain variables as *binary* or *dichotomous*. This simply means *categorical with two categories*.

## How to describe categorical data

Categorical variables are often described using *frequency counts* and *relative frequencies*. 

*Frequency counts* (or simply *frequencies*) are found by counting how many times each possible value is present in the data. *Relative frequencies* are found by dividing the frequency by the total number of observations. 

### Examples

Below are the frequencies for some categorical variables in the SHOW data set. One thing that often comes from this preliminary step of a data analysis is the realization that there are some kinks in your data. For example, notice how there are missing values for most of these variables (denoted by NA -- "Not Available").

```{r}
library(janitor)
SHOW_cat_freqs <- full_show %>% 
  select(gender, edu, marital, race) %>% 
  gather(key = "Variable", value = "Value") %>% 
  split(.$Variable) %>% 
  map(function(x){
    tmp <- x %>% 
      tabyl(Value) %>% 
      rename(Frequency = n,
             `Relative Frequency` = percent) %>% 
      select(-valid_percent) 
    
    if("D" %in% x$Value){
      tmp %>% 
        mutate(Value = factor(Value, levels = c(sort(as.numeric(unique(Value))), "D"))) %>% 
        arrange(Value) %>% 
        adorn_totals()
    } else {
      tmp %>% 
        mutate(Value = factor(Value, levels = sort(as.numeric(unique(Value))))) %>% 
        arrange(Value) %>% 
        adorn_totals()
    }
  })

SHOW_cat_freqs %>% 
  map(~ .x %>% 
        select(Value, Frequency)) %>% 
  pander::pander()
```

We can add relative frequencies to this simply by dividing each frequency by the total number of observations. You can check a few of them yourself -- simply divide the frequency by the total number of observations (found on the last line of the table). 

```{r}
SHOW_cat_freqs %>% 
  pander::pander()
```


Relative frequencies are useful when trying to compare the values of a specific variable across groups. Say we want to investigate if there are any differences in the marital status between genders in this cohort. We could consider the frequency of marital status stratified by gender:

```{r}
full_show %>% 
  tabyl(gender, marital) %>% 
  adorn_percentages() %>% 
  adorn_totals(where = "col") %>% 
  adorn_ns() %>% 
  knitr::kable()
```

The table above shows the relative frequencies of marital status within each gender (frequency counts in parentheses). So we can see that the relative frequencies of men and women in the different groups are very close to each other. If you just look at the raw frequencies, this would not be obvious. 


## Ordinal Data

An *ordinal variable* is a discrete variable where the groups can easily be ordered in a meaningful sense. We won't distinguish between ordinal variables and categorical variables in this class, but there are methods out there that try to incorporate the extra information from ordinal data that you lose if you treat it as categorical data. 

### Examples 

* age groups
* disease severity scales

## How to visualize discrete data

Discrete data is often best presented using a bar chart of either frequency counts or relative frequencies. 

### Bar Charts

Below is a bar chart of the frequency counts of the marital status varaible from the SHOW data. 

```{r}
ggplot(full_show, aes(x = marital)) + 
  geom_bar(width = 0.75) + 
  labs(x = 'Martial Status', y = "Frequency Counts") +
  scale_y_continuous(limits = c(0, max(table(full_show$marital))) + c(0,3), 
                     expand = expand_scale(mult = c(0, 0.1), add = c(0,0))) + 
  theme_bw()
```

This can easily be turned into a bar chart of the relative frequencies. 

```{r}
ggplot(full_show, aes(x = marital)) + 
  geom_bar(aes(y = ..count../sum(..count..)), 
           width = 0.75) + 
  scale_y_continuous(limits = c(0,1), 
                     expand = c(0,0)) +
  labs(x = 'Martial Status', y = "Relative Frequency") + 
  theme_bw()
```


# Continuous Data {#continuous}

A *continuous variable* is a numerical variable that can (at least theoretically) take on an infinite and uncountable number of possible values. 

## Examples

* age
* height
* speed
* blood pressure
* heart rate

## How to describe continuous data

When dealing with continuous data, we are often interested in two aspects: 

1. location
2. spread

### Location

The location of continuous data is often described by one of two metrics: the *mean* (or *average*) and the *median*. For completion, these are briefly defined below. For a more in-depth discussion of the mean and the median, see [@ls] pages 50-57

#### Mean 

The *mean* of a variable measured in a sample is also referred to as the *sample mean* or *average*. It is simply calculated as the sum of all observed values divided by the number of values. If we are interested in a variable $X$, the average is denoted $\bar{X}$ (read "$X$ bar"). So $\bar{X} = \frac{1}{n}\sum_{i=1}^n X_i$.^[If you are not familiar with this notation, fear not: it simply means "sum up all values of $X$". I.e., $\sum_{i=1}^n X_i = X_1 + X_2 + X_3 + ... + X_n$.] 

#### Median

The *median* is the middle point of the data. It is found by writing down all observations in order, then eliminating the most extreme pair (i.e. the smallest and largest values). Repeat until only one observation, or one pair of observations, is left. If you're left with one observation, congratulations, you found the median. If you're left with a pair, the median is the average of the two. 

#### Other location related metrics

Sometimes we are interested in the most extreme values we can expect of a value. Here it would be of interest to find the *minimum* and *maximum* of the variable. 

More generally, the minimum, median, and maximum values are examples of what is called *quantiles*. A quantile is a number that "cuts off" a certain proportion of the data (from the bottom). You can think of the median as the number that "cuts off" half the data. Therefore the median is also called the 0.5 quantile. The minimum is the 0 quantile (it cuts off nothing of the data), and the maximum the 1 quantile (it cuts off all the data). The most commonly used quantiles are the *quartiles*. This is the set of numbers that cut the data into four equally sized pieces. I.e. the 0.25, 0.5, and 0.75 quantiles are collectively known as the quartiles. These can be useful when talking about the location of the data, since indicating the 0.25 and 0.75 quantiles tells you where half the data is located -- namely between those two values.

### Spread

Once we have an idea of the location of a continuous variable, the next natural question is how large the spread (or variation) is. 

To motivate our interest in a measure of the spread of a continuous variable, say we are interested in any association between 


## How to visualize continuous data

My favorite graphs to use with continuous data are scatter plots, boxplots, and histograms.

### Scatter Plots

A scatter plot is only really useful when you are considering the relationship between two variables where at least one is continuous. For example, consider the variables `height` and `weight` from the SHOW data. A scatter plot shows potential relationships between the two. Unsurprisingly, it seems that there is a positive correlation between the two -- i.e. when one goes up, so does the other. 

```{r}
full_show %>% 
  ggplot(aes(x = height, y = weight)) + 
    geom_point(alpha = 0.3)
```


You can also utilize scatter plots when one of the variables is categorical. For example, we could be interested in the relationship between height and gender. 

```{r}
full_show %>% 
  ggplot(aes(x = gender, y = height)) + 
    geom_point(alpha = 0.5)
```

In this case, it can be beneficial to add a bit of jitter to the plot in the direction of the categorical variable.

```{r}
full_show %>% 
  ggplot(aes(x = gender, y = height)) + 
    geom_jitter(height = 0, width = 0.3, alpha = 0.5)
```

Even with a bit of jitter, it might be really hard to make anything of a scatter plot in this case, simply because we have "too much" data. In such a case, a boxplot might be a better choice. 

### Boxplots

Boxplots are great when you have a lot of data. They show the data through a set of summaries, namely the quartiles. Below are boxplots for the height of the SHOW population by gender. 

```{r}
full_show %>% 
  filter(!is.na(gender), !is.na(height)) %>% 
  ggplot(aes(x = as.character(gender), y = height)) + 
    geom_boxplot() + 
    scale_y_continuous(limits = c(0, NA))
```

The boxed display.

# Grey areas

An example of a variable that could easily be mistaken as categorical is age. Often when we think about age, we think about this in terms of years, or months, or even days. In that sense, age is a variable with a number of possible values that we could technically count -- start with 0, 1, 2, 3, ..., 55, 56, 57, ... . However, this is NOT the natural structure of the variable, but rather a limitation of the way it is measured and recorded. Technically, age is the time from birth till now. 



This manuscript was prepared using the PECARN Core Data Project (PCDP) 2002-2014 (STUDY) Data Set obtained from UTAH, and does not necessarily reflect the opinions or views of the STUDY investigators or the Health Resources Services Administration (HRSA) Maternal Child Health Bureau (MCHB) Emergency Medical Services for Children (EMSC). The PECARN was funded by the HRSA/MCHB/EMSC.

